import{j as r,p as i,f as n,L as o,S as p}from"./index-b0filKha.js";import{M as l}from"./MessageBlock-CBR_p3We.js";const g="_card_mdbcq_1",x="_card__content_mdbcq_13",h="_card__img_mdbcq_16",j="_card__wrapper_mdbcq_29",u="_card__title_mdbcq_67",k="_card__link_mdbcq_82",N="_marks_mdbcq_115",f="_marks__item_mdbcq_124",c={card:g,card__content:x,"card__img-wrapper":"_card__img-wrapper_mdbcq_16",card__img:h,card__wrapper:j,"card__price-wrapper":"_card__price-wrapper_mdbcq_34","card__old-price":"_card__old-price_mdbcq_53",card__title:u,card__link:k,marks:N,marks__item:f},b=({marks:s})=>s.length===0?null:r.jsx("div",{className:c.marks,children:s.map((_,a)=>r.jsx("div",{className:c.marks__item,style:{backgroundColor:_.color_code},children:_.Mark_Name},a))}),q=({productData:s})=>{const _=s.images.find(e=>e.MainImage===!0)?.Image_URL??i,a=e=>{e.currentTarget.src!==i&&(e.currentTarget.src=i)};return r.jsxs("article",{className:c.card,children:[r.jsxs("div",{className:c.card__content,children:[r.jsx("div",{className:c["card__img-wrapper"],children:r.jsx("img",{src:_,alt:s.name,className:c.card__img,loading:"lazy",onError:a})}),r.jsxs("div",{className:c.card__wrapper,children:[r.jsxs("div",{className:c["card__price-wrapper"],children:[r.jsx("strong",{className:c.card__price,children:n(s.price)}),s.old_price!==null&&r.jsx("strong",{className:c["card__old-price"],children:n(s.old_price)})]}),r.jsx("h3",{className:c.card__title,children:s.name})]})]}),r.jsx(o,{to:`/${s.id}`,className:c.card__link,children:"Подробнее"}),r.jsx(b,{marks:s.marks})]})},w="_products__list_3oq3q_1",d={products__list:w},v=()=>r.jsx("section",{className:d.products,children:r.jsx("div",{className:d.products__list,children:Array.from({length:6},(s,_)=>r.jsx(p,{height:274},_))})}),I=({dataQuery:s})=>{const{data:_,isLoading:a,isError:e,refetch:m}=s;return a?r.jsx(v,{}):e?r.jsx(l,{message:"Не удалось получить список :(",onRefetch:m}):_?r.jsx("section",{className:d.products,children:r.jsx("ul",{className:d.products__list,children:_.map(t=>r.jsx("li",{className:d.product__item,children:r.jsx(q,{productData:t})},t.id))})}):r.jsx(l,{message:"Список пуст"})};export{I as default};
